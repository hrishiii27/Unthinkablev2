# 🛍️ E-commerce Product Recommender

An intelligent e-commerce platform that combines a hybrid recommendation engine with LLM-powered explanations to deliver a personalized and transparent shopping experience. This system provides users not only with product suggestions but also with clear, human-like reasons for why each product is a great fit for them.

---

## 🎯 Project Objective

The core objective is to build a robust backend API that takes a **product catalog and user interaction history** as input and outputs a list of **recommended products**. Each recommendation is enriched with a unique explanation generated by a Large Language Model (LLM), answering the question: "Why was this product recommended to me?"

---

## ⚡ Quick Setup

### 1️⃣ Clone & Enter

```bash
git clone <your-repo-url>
cd UNTHINKABLEV2
````

### 2️⃣ Create Virtual Environment

```bash
python3.11 -m venv .venv
source .venv/bin/activate   # Mac/Linux
# OR
.venv\Scripts\activate      # Windows
```

### 3️⃣ Install Dependencies

```bash
pip install -r requirements.txt
```

### 4️⃣ Configure Environment

Create a `.env` file and add your Google Gemini API key.

```env
GEMINI_API_KEY="your_gemini_api_key_here"
DATABASE_URL="sqlite:///./ecommerce.db"
```

> 💡 You can get a free API key from **[Google AI Studio](https://aistudio.google.com/app/apikey)**.

### 5️⃣ Generate Data & Seed Database

Run the master setup script to populate the database.

```bash
# Recommended: Use the automated shell script
bash setup.sh

# Or run the Python script manually
python setup_master.py
```

### 6️⃣ Run the API Server

```bash
uvicorn main:app --reload
```

Now visit the interactive docs: 👉 **[http://localhost:8000/docs](https://www.google.com/search?q=http://localhost:8000/docs)**

-----

## 📁 Project Structure

```
UNTHINKABLEV2/
│
├── main.py                     # FastAPI application entry point and API endpoints.
├── llm_service.py              # Service to interact with the Google Gemini API.
├── setup_master.py             # Master script to orchestrate data generation and seeding.
├── extended_data_generator.py  # Generates synthetic users, products, and interactions.
├── seed_database.py            # Populates the database from generated JSON files.
├── schema.sql                  # SQL schema for creating the database tables.
├── ecommerce.db                # SQLite database file.
│
├── test_recommendations.py     # Pytest suite for the recommendation logic.
├── test_system.py              # Pytest suite for system-level API tests.
│
├── *.json                      # Raw data files (users, products, interactions).
├── requirements.txt            # Python package dependencies.
├── .env                        # Environment variables (API keys, DB URL).
├── setup.sh                    # Automated setup script for easy installation.
└── README.md                   # This file!
```

-----

## 🧩 Core Features

| Feature                       | Description                                                                  |
| ----------------------------- | ---------------------------------------------------------------------------- |
| 🧠 **Hybrid Recommendations** | A sophisticated engine that combines multiple strategies for accuracy.       |
| 💬 **LLM-Powered Explanations** | Google Gemini generates personalized reasons for each recommendation. |
| 📊 **Recommendation Scoring** | Each recommendation includes a `score` for transparency and ranking.         |
| 🏷️ **Dynamic Product Tagging** | Products are tagged with relevant keywords for better filtering and context. |
| 📈 **Interaction Tracking** | Logs user behavior (views, purchases) to dynamically update profiles.   |
| ⚡ **FastAPI Backend** | High-performance API with automatic interactive documentation via Swagger UI.  |
| 🧍 **Rich User & Product Data** | Detailed user personas and a comprehensive product catalog drive the system. |

-----

## 🤖 LLM Integration

The `llm_service.py` is central to this project. It crafts a detailed prompt for the Gemini API, asking it to: *"Explain why product X is recommended to this user based on their behavior."* This produces dynamic, context-aware, and persuasive explanations.

-----

## 🔑 Key API Endpoints

### 📍 Get Recommendations

To get a nicely formatted JSON response in your terminal, pipe the `curl` output to `python -m json.tool`.

```bash
curl "http://localhost:8000/recommendations/69?limit=5" | python -m json.tool
```

### 🛒 Track an Interaction

```bash
curl -X POST "http://localhost:8000/interactions" \
  -H "Content-Type: application/json" \
  -d '{"user_id": 1, "product_id": 5, "interaction_type": "purchase"}'
```

-----

## 📝 Example Response

A `GET /recommendations/{user_id}` request returns a detailed list of products, each with a calculated score, tags, and a unique LLM-generated explanation.

```json
{
    "product_id": 1130,
    "product_name": "The North Face Pro Camping",
    "price": 946.45,
    "rating": 4.5,
    "category": "Sports & Outdoors",
    "score": 62.88,
    "explanation": "Andrea, given your adventurous spirit and love for the outdoors, The North Face Pro Camping gear is calling your name. Like your Garmin watch, it’s built for action, offering top-tier performance for any camping trip you can dream up. And with a 4.5-star rating, you know you're investing in quality at $946.45.",
    "tags": [
        "adventure",
        "active",
        "outdoor",
        "camping"
    ]
}
```

-----

## 🧪 Testing

Run the automated tests using Pytest to ensure system integrity.

```bash
pytest -v
```

-----

## 🚀 Deployment

For production, it is recommended to use a robust database like PostgreSQL and a production-grade server like Gunicorn.

1.  **Update `.env` for PostgreSQL:**
    ```env
    DATABASE_URL=postgresql://user:pass@host:port/dbname
    GEMINI_API_KEY=your_api_key_here
    ```
2.  **Run with Gunicorn:**
    ```bash
    gunicorn -w 4 -k uvicorn.workers.UvicornWorker main:app --bind 0.0.0.0:8000
    ```

-----

## 🧾 License

MIT License © 2025

```
```
